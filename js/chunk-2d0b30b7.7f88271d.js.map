{"version":3,"sources":["webpack:///./src/views/test.vue?40ee","webpack:///src/views/test.vue","webpack:///./src/views/test.vue?5f02","webpack:///./src/views/test.vue"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","attrs","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAII,MAAMC,GAAO,OAAOL,EAAIM,GAAG,IACnGC,EAAkB,CAAC,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBE,EAAGL,EAAII,MAAMC,IAAIH,EAAG,OAAOG,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,QAAQ,MAAQ,QAAQ,QAAU,iBAAiBH,EAAG,MAAMA,EAAG,QAAQ,CAACG,MAAM,CAAC,OAAS,QAAQ,SAAW,cAAcH,EAAG,MAAMA,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,KAAK,MAAQ,KAAK,QAAU,iBAAiBH,EAAG,MAAMA,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,UAAU,OAAS,WAAWH,EAAG,MAAMA,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,KAAK,MAAQ,KAAK,QAAU,iBAAiBH,EAAG,MAAMA,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,UAAU,OAAS,eCkB/kB,GACE,KADF,WAEI,MAAJ,CACM,MAAN,GACM,MAAN,GACM,UAAN,GACM,QAAN,GACM,SAAN,GACM,QAAN,GACM,SAAN,GACM,QAAN,KAGE,QAbF,WAcI,KAAJ,sCACI,KAAJ,2CACI,KAAJ,uCACI,KAAJ,2CACI,KAAJ,uCAEI,UAAJ,uHACI,OAAJ,8DACI,iBAAJ,uBACM,IAAN,yBACQ,IAAR,OAEA,kBACU,KAAV,uBAKE,QAAF,CACI,SADJ,WAEA,uBACQ,UAAR,cACU,MAAV,CACY,SAAZ,EACc,SAAd,mBAGU,OAAV,GACA,uBAGQ,MAAR,gFAII,YAjBJ,SAiBA,QAEA,4BAEQ,KAAR,qBAGQ,KAAR,uDAMM,KAAN,gBACM,KAAN,mCACA,iBACQ,KAAR,qCACQ,KAAR,eAII,UAtCJ,SAsCA,GACM,MAAN,aAKI,kBA5CJ,SA4CA,GACM,OAAN,uBACQ,EAAR,kCACA,KAII,aAnDJ,SAmDA,GACM,GAAN,eACQ,GAAR,oDACU,MAAV,MACA,oDACU,MAAV,MAGM,OAAN,GAGI,SA9DJ,WA+DM,KAAN,2CAII,SAnEJ,WAoEM,kBAAN,kBCvH8U,I,YCO1UC,EAAY,eACd,EACAV,EACAQ,GACA,EACA,KACA,KACA,MAIa,aAAAE,E","file":"js/chunk-2d0b30b7.7f88271d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{attrs:{\"type\":\"button\",\"title\":\"开启摄像头\",\"value\":\"开启摄像头\",\"onclick\":\"getMedia();\"}}),_c('br'),_c('video',{attrs:{\"height\":\"120px\",\"autoplay\":\"autoplay\"}}),_c('hr'),_c('input',{attrs:{\"type\":\"button\",\"title\":\"拍照\",\"value\":\"拍照\",\"onclick\":\"getPhoto();\"}}),_c('br'),_c('canvas',{attrs:{\"id\":\"canvas1\",\"height\":\"120px\"}}),_c('hr'),_c('input',{attrs:{\"type\":\"button\",\"title\":\"视频\",\"value\":\"视频\",\"onclick\":\"getVedio();\"}}),_c('br'),_c('canvas',{attrs:{\"id\":\"canvas2\",\"height\":\"120px\"}})])}]\n\nexport { render, staticRenderFns }","<!--\r\n * @Description: In User Settings Edit\r\n * @Author: your name\r\n * @Date: 2019-08-18 18:01:27\r\n * @LastEditTime: 2019-08-18 18:34:22\r\n * @LastEditors: Please set LastEditors\r\n -->\r\n<template>\r\n  <div>\r\n        <input type=\"button\" title=\"开启摄像头\" value=\"开启摄像头\" onclick=\"getMedia();\" /><br />  \r\n        <video height=\"120px\" autoplay=\"autoplay\"></video><hr />  \r\n        <input type=\"button\" title=\"拍照\" value=\"拍照\" onclick=\"getPhoto();\" /><br />  \r\n        <canvas id=\"canvas1\" height=\"120px\" ></canvas><hr />  \r\n        <input type=\"button\" title=\"视频\" value=\"视频\" onclick=\"getVedio();\" /><br />  \r\n        <canvas id=\"canvas2\" height=\"120px\"></canvas>  \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            video:'',\r\n            audio:'',\r\n            audioType:'',\r\n            canvas1:'',\r\n            context1:'',\r\n            canvas2:'',\r\n            context2:'',\r\n            exArray:[]\r\n        }\r\n    },\r\n    mounted(){\r\n        this.video = document.querySelector('video');  \r\n        this.canvas1 = document.getElementById('canvas1');  \r\n        this.context1 = this.canvas1.getContext('2d');\r\n        this.canvas2 = document.getElementById('canvas2');  \r\n        this.context2 = this.canvas2.getContext('2d');\r\n\r\n        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;  \r\n        window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\r\n        MediaStreamTrack.getSources(function (sourceInfos) {  \r\n            for (var i = 0; i != sourceInfos.length; ++i) {  \r\n                var sourceInfo = sourceInfos[i];  \r\n                //这里会遍历audio,video，所以要加以区分  \r\n                if (sourceInfo.kind === 'video') {  \r\n                    this.exArray.push(sourceInfo.id);  \r\n                }  \r\n            }  \r\n        });  \r\n    },\r\n    methods: {\r\n        getMedia() {  \r\n            if (navigator.getUserMedia) {  \r\n                navigator.getUserMedia({  \r\n                    'video': {  \r\n                        'optional': [{  \r\n                            'sourceId': this.exArray[1] //0为前置摄像头，1为后置  \r\n                        }]  \r\n                    },  \r\n                    'audio':true  \r\n                }, successFunc, errorFunc);    //success是获取成功的回调函数  \r\n            }  \r\n            else {  \r\n                alert('Native device media streaming (getUserMedia) not supported in this browser.');  \r\n            }  \r\n        },  \r\n  \r\n        successFunc(stream) {  \r\n            //alert('Succeed to get media!');  \r\n            if (this.video.mozSrcObject !== undefined) {  \r\n                //Firefox中，video.mozSrcObject最初为null，而不是未定义的，我们可以靠这个来检测Firefox的支持  \r\n                this.video.mozSrcObject = stream;  \r\n            }  \r\n            else {  \r\n                this.video.src = window.URL && window.URL.createObjectURL(stream) || stream;  \r\n            }  \r\n  \r\n            //video.play();  \r\n  \r\n            // 音频  \r\n            this.audio = new Audio();  \r\n            this.audioType = getAudioType(this.audio);  \r\n            if (this.audioType) {  \r\n                this.audio.src = 'polaroid.' + this.audioType;  \r\n                this.audio.play();  \r\n            }  \r\n        },\r\n\r\n        errorFunc(e) {  \r\n            alert('Error！'+e);  \r\n        },  \r\n  \r\n          \r\n        // 将视频帧绘制到Canvas对象上,Canvas每60ms切换帧，形成肉眼视频效果  \r\n        drawVideoAtCanvas(context) {  \r\n            window.setInterval(function () {  \r\n                context.drawImage(this.video, 0, 0,90,120);  \r\n            }, 60);  \r\n        },\r\n  \r\n        //获取音频格式  \r\n        getAudioType(element) {  \r\n            if (element.canPlayType) {  \r\n                if (element.canPlayType('audio/mp4; codecs=\"mp4a.40.5\"') !== '') {  \r\n                    return ('aac');  \r\n                } else if (element.canPlayType('audio/ogg; codecs=\"vorbis\"') !== '') {  \r\n                    return (\"ogg\");  \r\n                }  \r\n            }  \r\n            return false;  \r\n        },\r\n        //拍照  \r\n        getPhoto() {  \r\n            this.context1.drawImage(this.video, 0, 0,90,120); //将video对象内指定的区域捕捉绘制到画布上指定的区域，实现拍照。  \r\n        },\r\n  \r\n        //视频  \r\n        getVedio() {  \r\n            drawVideoAtCanvas(this.context2);  \r\n        }  \r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./test.vue?vue&type=template&id=240b31cf&\"\nimport script from \"./test.vue?vue&type=script&lang=js&\"\nexport * from \"./test.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}